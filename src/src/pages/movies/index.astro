---
import Layout from '../../layouts/Layout.astro';
import {getCollection} from "astro:content"
import MoviesCarousel from '../../components/MoviesCarousel.astro';
import { Image } from 'astro:assets';
import heroImage from '../../content/assets/Karting-Club-Tenerife-Horizontal.jpg'

const allprojects = await getCollection('projects');
const allPrimaryCategories = [];
allprojects.forEach(project => {
    if (!allPrimaryCategories.includes(project.data.primaryCategory)) {
        allPrimaryCategories.push(project.data.primaryCategory);
    }
})
---
<style>
    * {
        color: white;
    }

    img {
        width: 100%;
        object-fit: cover;
    }
</style>
<Layout darkMode="true">
    <main>
        <!--<div class="hero-image">-->
        <!--    <Image-->
        <!--            src={heroImage}-->
        <!--            height="700"-->
        <!--            alt="hero image"-->
        <!--    ></Image>-->
        <!--</div>-->
            {
                allPrimaryCategories.map(category =>
                    <MoviesCarousel
                        categoryTitle={category}
                        projects={allprojects.filter(p => p.data.primaryCategory === category)}/>)
            }
    </main>
</Layout>

